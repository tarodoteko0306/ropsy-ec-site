{"detail":"Found"}
<script>
// 価格計算を修正
function updateOrderSummary() {
    const selectedProduct = document.querySelector('#productOptions .option-card.selected');
    const selectedFrequency = document.querySelector('#frequencyOptions .frequency-card.selected');
    
    if (!selectedProduct) return;
    
    const plan = selectedProduct.dataset.plan;
    let basePrice, shipping, totalPrice;
    
    // 正しい価格設定
    switch(plan) {
        case 'single':
            basePrice = 1600;
            shipping = 500;
            totalPrice = basePrice + shipping; // 2100円
            break;
        case 'double':
            basePrice = 2880;
            shipping = 0;
            totalPrice = basePrice; // 2880円（送料無料）
            break;
        case 'triple':
            basePrice = 4080;
            shipping = 0;
            totalPrice = basePrice; // 4080円（送料無料）
            break;
    }
    
    // 定期購入割引
    if (selectedFrequency) {
        const discount = parseFloat(selectedFrequency.dataset.discount);
        totalPrice = Math.round(totalPrice * discount);
    }
    
    // サマリー更新
    let summaryHTML = `<div class="summary-row"><span>商品代金</span><span>¥${basePrice.toLocaleString()}</span></div>`;
    
    if (shipping > 0) {
        summaryHTML += `<div class="summary-row"><span>送料</span><span>¥${shipping}</span></div>`;
    }
    
    if (selectedFrequency) {
        const discountPercent = Math.round((1 - parseFloat(selectedFrequency.dataset.discount)) * 100);
        summaryHTML += `<div class="summary-row"><span>定期購入割引 ${discountPercent}%OFF</span><span>-¥${((basePrice + shipping) - totalPrice).toLocaleString()}</span></div>`;
    }
    
    summaryHTML += `<div class="summary-row"><span>合計金額</span><span>¥${totalPrice.toLocaleString()}</span></div>`;
    
    document.getElementById('orderSummaryContent').innerHTML = summaryHTML;
}

// カード入力欄を修正
document.addEventListener('DOMContentLoaded', function() {
    // カード番号入力欄を有効化
    const cardNumber = document.getElementById('cardNumber');
    const cardExpiry = document.getElementById('cardExpiry');
    const cardCVC = document.getElementById('cardCVC');
    
    if (cardNumber) {
        cardNumber.removeAttribute('readonly');
        cardNumber.removeAttribute('disabled');
        cardNumber.placeholder = '1234 5678 9012 3456';
        
        // カード番号フォーマット
        cardNumber.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s/g, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            if (formattedValue.length <= 19) {
                e.target.value = formattedValue;
            }
        });
    }
    
    if (cardExpiry) {
        cardExpiry.removeAttribute('readonly');
        cardExpiry.removeAttribute('disabled');
        cardExpiry.placeholder = 'MM/YY';
        
        // 有効期限フォーマット
        cardExpiry.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0,2) + '/' + value.substring(2,4);
            }
            e.target.value = value;
        });
    }
    
    if (cardCVC) {
        cardCVC.removeAttribute('readonly');
        cardCVC.removeAttribute('disabled');
        cardCVC.placeholder = '123';
        cardCVC.maxLength = 4;
    }
});
</script>
